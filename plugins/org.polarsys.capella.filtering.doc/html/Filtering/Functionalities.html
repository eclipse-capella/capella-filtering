<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title>Functionalities</title>
		<link type="text/css" rel="stylesheet" href="PLUGINS_ROOT/org.polarsys.capella.doc/html/styles.css"/>
	</head>
	<body>
		<h1 id="Functionalities">Functionalities</h1>
		<p>Once the Basic Variability Add-On is installed, you have to activate this viewpoint for each projects you want to work with, to see how please refers to:

			<a href="/wiki/../help/topic/org.polarsys.capella.viewpoint.doc/html/activation/activation.html" title="../help/topic/org.polarsys.capella.viewpoint.doc/html/activation/activation.html">Capella Guide &gt; User Manual &gt; Viewpoints &gt; Activation</a>.
		</p>
		<p>Then, these projects are susceptible of being enriched with filtering information. That means that for creating a generic product the user should follow the standard Capella new project creation.</p>
		<h2 id="Defining_the_Variability_model">Defining the Variability model</h2>
		<p>The 
			<b>filtering model</b> supports defining a set of filtering points called 
			<b>features</b>. The filtering model is defined in the 
			<b>FilteringModel</b> element that is created as a child of System Engineering. For creating a FilteringModel right-click the System Engineering model element.
		</p>
		<p><center>
			<img width="540" border="0" src="Images/functionalities_define_filtering_model.png"/></center>
		</p>
		<h3 id="Adding_new_features_to_the_Variability_model">Adding new features to the Variability model</h3>
		<p>New features could be added once the user creates the FilteringModel element.</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_adding_filtering_model_criterion.png"/></center>
		</p>
		<p>The user can also create constraints for documentation. Notice also that FilteringModel is a list of Variability Features so no hierarchical relations could be defined.</p>
		<h2 id="Associate_Model_elements_with_Features">Associate Model elements with Features</h2>
		<p>Each melody element contains a Variability properties section. Double click an element or see the Properties view of a given element.</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_associate_criteria.png"/></center>
		</p>
		<p>A feature selector will appear and the user can select the feature or set of features associated with the given element.</p>
		<p>If no filtering features is assigned explicitly to a given melody element, it is still possible that this element could be assigned implicitly to a feature. For example: a Part element of a given optional element or the child of an optional element. This derived property of a melody element is called Implicit Features.</p>
		<p>Also, the action to associate features to model elements is available selecting a melody element, right click, and  </p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_assign_icon.png"/> Assign Variability Features
			</b>
		</p>
		<p><center>
			<img width="600" border="0" src="Images/functionalities_define_filtering_model_assign.png"/></center>
		</p>
		<h3 id="Multiple_elements_Assignation">Multiple elements Assignation</h3>
		<p>The user can also select multiple model elements and apply feature selections to all of them at the same time.</p>
		<p><center>
			<img width="400" border="0" src="Images/functionalities_multiple_assign.png"/></center>
		</p>
		<p>The initial state of this dialog shows the current feature status of the selected elements. These figures present possible initial states of the assignation dialog and its meaning:</p>
		<table class="prettytable">
			<tr>
				<td>
					<p><center>
						<img width="240" border="0" src="Images/functionalities_multiple_assign_choice.png"/></center>
					</p>
				</td>
				<td>
					<p><center>
						<img width="240" border="0" src="Images/functionalities_multiple_assign_choice2.png"/></center>
					</p>
				</td>
				<td>
					<p><center>
						<img width="240" border="0" src="Images/functionalities_multiple_assign_choice3.png"/></center>
					</p>
				</td>
			</tr>
			<tr>
				<td>
					<p><center>''
						<i>None of the selected elements have </i>associated features''</center>
					</p>
				</td>
				<td>
					<p><center>''
						<i>All the selected elements belong </i>to Feature1''</center>
					</p>
				</td>
				<td>
					<p><center>''
						<i>All the selected elements belong to </i>Feature1 and some of them, not all, belong to Feature2''</center>
					</p>
				</td>
			</tr>
		</table>
		<p>In the third case, if no user modifications are performed to this gray checkbox in Feature2, the tags for this feature will remain as they were in this moment.</p>
		<h3 id="Using_an_existing_Configuration_for_feature_assignation">Using an existing FilteringResult for feature assignation</h3>
		<p>Users may want to assign to model elements the features that were previously assigned to an existing FilteringResult. A dedicated selector in the Assign Variability Features dialog allows the user to reuse feature selections.</p>
		<p><center>
			<img width="600" border="0" src="Images/functionalities_use_result.png"/></center>
		</p>
		<h3 id="Automatic_assignation_when_creating_Model_Elements">Automatic assignation when creating Model Elements</h3>
		<p>If the user is modifying the Capella model by adding new elements that will contribute to a feature (or to a given feature selection), then it will be interesting to be able to automatically assign features when creating any model element. First the user should create a Creation Default Feature Set element as child of System Engineering and then select the features in the properties view of this element.</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_automatic_assignation.png"/></center>
		</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_automatic_assignation_assign.png"/></center>
		</p>
		<h2 id="Creating_specific_product_configurations">Creating specific product configurations</h2>
		<h3 id="Create_configurations">Create configurations</h3>
		<p>Once Domain Engineers provide a Generic Model to derive products, then the Application Engineers can use it to extract products based on their feature selections.</p>
		<p>To create configurations first the user should create a Configurations element as child of the System Engineering element.</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_create_configurations.png"/></center>
		</p>
		<p>Then the user could create a specific FilteringResult as child of the Configurations element and select its features in its properties view.</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_create_result.png"/></center>
		</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_create_result_assign.png"/></center>
		</p>
		<p>When selecting a Feature in the Feature Model, the user could see in the Semantic Browser the Configurations that have this feature.</p>
		<h3 id="Product_family_representation">Product family representation</h3>
		<p>Activate Variability viewpoint right clicking Aird file and clicking 
			<b>Viewpoints selection</b>
		</p>
		<p><center>
			<img width="420" border="0" src="Images/functionalities_activate_viewpoint.png"/></center>
		</p>
		<p>Right click 
			<b>System Engineering</b> element and then 
			<b>New Diagram / Table -&gt; [VAR] Product family</b>
		</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_create_table_filtering.png"/></center>
		</p>
		<p>The matrix allows modifying configurations, creating and deleting configurations, filtering features and applying filters and other basic cross table functionalities.</p>
		<p><center>
			<img width="480" border="0" src="Images/functionalities_table_filtering.png"/></center>
		</p>
		<h2 id="Derivation_of_a_specific_Product">Derivation of a specific Product</h2>
		<p>This action is available right clicking in a FilteringResult element.</p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt;  Perform Derivation</b>
		</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_perform_derivation.png"/></center>
		</p>
		<p>The user should open the Project and Melody session if closed. Also there is the restriction that a generic product project can only contains one Capella systems engineering project.</p>
		<p>In the following dialog the users should introduce the name of the product that is going to be extracted. By default it will be the name of the FilteringResult. A new project will be created in the workspace. This specific product will contain only the elements that were associated to the selected features in the configuration.</p>
		<p><center>
			<img width="380" border="0" src="Images/functionalities_perform_derivation_create.png"/></center>
		</p>
		<table class="prettytable">
			<tr>
				<td></td>
				<td>
					<p>Notice that descriptions hyperlinks could reference an incorrect element if the session of the Domain project is opened while the session of a derived project is also opened.</p>
				</td>
			</tr>
		</table>
		<h2 id="Derivation_with_libraries">Derivation with libraries</h2>
		<h3 id="Derivation_of_a_project_doesn.E2.80.99t_derive_its_referenced_libraries">Derivation of a project doesn’t derive its referenced libraries</h3>
		<table class="prettytable">
			<tr>
				<td></td>
				<td>
					<p>Derivation of a model referencing libraries will not derive the referenced libraries. So on, libraries will remain untouched/not derived and ALL its referenced elements will remain referenced by the application project even if these library’s elements were not assigned to the features of the derivation.</p>
				</td>
			</tr>
		</table>
		<h3 id="Variability_Features_from_Libraries">Variability Features from Libraries</h3>
		<p>When a model references libraries, it is possible to assign features defined in referenced libraries on elements from the given model. Such features will be avaibable on the assignation wizard.</p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_assign_icon.png"/> Assign Variability Features
			</b>
		</p>
		<p><center>
			<img width="640" border="0" src="Images/functionalities_derivation_libraries_assign_menu.png"/></center>
		</p>
		<p><center>
			<img width="380" border="0" src="Images/functionalities_derivation_libraries_assign.png"/></center>
		</p>
		<p>
			<i>The set of available features in the wizard depends on model elements to be assigned; In case where assignation is made on elements from a referenced library, features defined in the project will not be proposed (to avoid cycle dependency between library and project)</i>
		</p>
		<h3 id="Source_and_application_project_ID">Source and application project ID</h3>
		<p>Capella can’t have two projects with the same ID and referencing the same library.</p>
		<p>If your project has at least one reference to a library, you must check the corresponding option in Variability preference page.</p>
		<p><center>
			<img width="540" border="0" src="Images/functionalities_derivation_libraries_preferences.png"/></center>
		</p>
		<p>After derivation, application project will have a different project ID. It means, if you use DiffMerge for application/domain model comparison, it will fail. By default, DiffMerge use ID for comparison between models.</p>
		<table class="prettytable">
			<tr>
				<td></td>
				<td>
					<p>If you want to use DiffMerge between application and domain model, please follow these instructions:</p>
					<ol>
						<li>Close all opened sessions: 
							<b>Right click</b> on *.aird and select 
							<b>Close Session</b>. For domain, application and library models.
						</li>
						<li>Open Navigator View: 
							<b>Window-&gt;Show View-&gt;Other…-&gt;General-&gt;Navigator</b>
						</li>
						<li>Change ID in melodymodeller application model: 
							<b>Right click</b> on melodymodeller application model and select 
							<b>Open With-&gt;Text Editor</b>. Change ID of the melodymodeller with the domain melodymodeller ID. (ID look like: 
							<i>&lt;org.polarsys.capella.core.data.capellamodeller:Project xmi:version="2.0" … id="1c751911-23e0-426f-8cc6-42cec0bb20d7"  name="toto"&gt;</i>
						</li>
						<li>Change ID in aird application model: Change reference to the .melodymodeller (reference to melodymodeller look like: 
							<i>toto.melodymodeller#1c751911-23e0-426f-8cc6-42cec0bb20d7</i>)
						</li>
						<li>Now you can use DiffMerge, but always with closed session.</li>
						<li>Restore Application ID before open any session.</li>
					</ol>
				</td>
			</tr>
		</table>
		<h2 id="Visualizing_filtering_in_Model_Elements">Visualizing filtering in Model Elements</h2>
		<h3 id="Variability_related_decorators">Variability related decorators</h3>
		<p>Once you select a feature for a given element it appears in the Semantic Browser, as a suffix in the Capella Project Explorer and also with a question mark decorator in the diagram. The decorator appears in the top-right side of the elements and in the center in the case of links.</p>
		<p><center>
			<img width="600" border="0" src="Images/functionalities_visualizing_decorator.png"/></center>
		</p>
		<p>There are some Preferences that could be adjusted for this visualization</p>
		<p>For the Capella Navigator, image and text feature decorators could be activated / deactivated in</p>
		<p>
			<b>Window -&gt; Preferences -&gt; General -&gt; Appearance -&gt; Label decorators</b>
		</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_visualizing_decorator_preferences.png"/></center>
		</p>
		<p>For the Melody Diagrams decorators could be activated / deactivated in</p>
		<p>
			<b>Window -&gt; Preferences -&gt; Capella -&gt; Variability</b>
		</p>
		<p>Or right clicking in a Diagram canvas.</p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_preferences_icon.png"/> Preferences
			</b>
		</p>
		<p><center>
			<img width="540" border="0" src="Images/functionalities_filtering_preferences.png"/></center>
		</p>
		<ul>
			<li>
				<b>Show associated Filtering Criterion in Diagram</b> is unchecked by default. This decorator allows visualizing the associated features of the semantic elements of diagram element.
			</li>
		</ul>
		<p><center>
			<img width="160" border="0" src="Images/functionalities_filtering_preferences_show_criteria_diagram.png"/></center>
		</p>
		<ul>
			<li>
				<b>Show Optional element decorator in Diagram</b> is checked by default. This decorator allows visualizing an icon in the top right of the optional element.
			</li>
			<li>
				<b>Keep decorators when saving Diagram</b> is checked by default. It allows establishing if the user wants to include these decorators when exporting a diagram image.
			</li>
		</ul>
		<p><center>
			<img width="480" border="0" src="Images/functionalities_filtering_preferences_decorators_on_export.png"/></center>
		</p>
		<h3 id="Variability_Features_Overview">Variability Features Overview</h3>
		<p>A global overview of the associated features could be obtained right clicking in a model element and selecting 
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_criteria_overview_icon.png"/>  Variability Features Overview
			</b>.
		</p>
		<p>The overview will show the elements with feature assignations and also their related elements.  For a full overview normally it is desired to perform it at Project element level.</p>
		<p><center>
			<img width="460" border="0" src="Images/functionalities_overview.png"/></center>
		</p>
		<p>This Overview has filtering options by selecting a feature or by introducing an element name. It is also possible to export this overview as CSV or TXT file.</p>
		<h2 id="Filtering_based_on_features">Filtering based on features</h2>
		<p>When working with diagrams in the definition of the Generic Product model it will be desired to filter based on features. Notice that filtering, show/hide and pinning functionalities are not available for sequence diagrams.</p>
		<h3 id="Hide_Optionals_and_Hide_Common_filters">Hide Optionals and Hide Common filters</h3>
		<p>Right click in the Diagram canvas</p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_hide_optionals_icon.png"/> Hide Optionals
			</b>
		</p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_hide_common_icon.png"/> Hide Common
			</b>
		</p>
		<p>These filters could be used to hide all the optional elements (those that have associated features) or to hide common elements respectively. Common elements are those that are not associated with any feature and therefore are part of the core of the product family. If a filter is active in the Diagram it appears as checked.</p>
		<h3 id="Show_or_hide_elements_based_on_the_selection_of_a_set_of_features">Show or hide elements based on the selection of a set of features</h3>
		<p>Right click in the Diagram canvas</p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_show_hide_criteria_icon.png"/> Show/hide features
			</b>
		</p>
		<p>The users select the features that they want to be shown. Or deselect the features that they want to be hidden.</p>
		<p><center>
			<img width="240" border="0" src="Images/functionalities_show_hide_features.png"/></center>
		</p>
		<p>If a feature in this list appears in italic font it means that some associated model elements are already hidden by other filters. If a filter is active in the Diagram it appears a check overlay decorator in the bottom right of the icon.</p>
		<table class="prettytable">
			<tr>
				<td></td>
				<td>
					<p>Notice that all the diagram filters could be used in combination. For example Hide Common and Filtering for a given feature will show the feature specific elements in the diagram.</p>
				</td>
			</tr>
		</table>
		<h2 id="Pinning_feature_elements_in_the_diagram">Pinning feature elements in the diagram</h2>
		<p>Right click in the Diagram canvas:</p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_pin_criteria.png"/> Pin/unpin features
			</b>
		</p>
		<p>The user can pin/unpin the associated diagram elements of a given set of features. </p>
		<h2 id="Select_feature_elements_in_the_diagram">Select feature elements in the diagram</h2>
		<p>Right click in the Diagram canvas:</p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_select_criteria.png"/> 
			</b>
			<b> Select features</b>
		</p>
		<p>The user can select the associated diagram elements of a given set of features. There is also a checkbox that allows the user to include all the common diagram elements in the selection.</p>
		<h2 id="Variability_metrics">Variability metrics</h2>
		<p>Metrics could be seen right clicking the 
			<b>
				<i>Systems Engineering</i>
			</b> model element.
		</p>
		<p>
			<img width="16" border="0" src="Images/filtering_icon.png"/> 
			<b>Variability -&gt; 
				<img width="16" border="0" src="Images/filtering_metrics_icon.png"/> Variability metrics
			</b>
		</p>
		<p>The optional ratio helps to understand where is the filtering in the model and the relative size of the optional elements. The optional rate showed for each model element is defined as:</p>
		<p>
			<b>Optional ratio (element) =</b> 100 if element is optional. 0 if element is not optional and it has no child. Else optional ration will be (number of optional children / total number of children)
		</p>
		<p><center>
			<img width="480" border="0" src="Images/functionalities_metrics.png"/></center>
		</p>
		<h2 id="Propagation_of_filtering_in_transitions">Propagation of filtering in transitions</h2>
		<p>Variability information will be propagated between layers using the default Melody Transitions. For example the following screenshot shows the transition of an optional Actor from System Analysis to Logic Architecture.</p>
		<p><center>
			<img width="520" border="0" src="Images/functionalities_transitions.png"/></center>
		</p>
		<p>The transition of filtering information could be deactivated in</p>
		<p>
			<b>Window -&gt; Preferences -&gt; Capella -&gt; Transition/Generation</b>
		</p>
		<p><center>
			<img width="580" border="0" src="Images/functionalities_transitions_preferences.png"/></center>
		</p>
		<p>Below DiffMerge wizard allow the user to see the effects of the transition and also to be able to decide for each transition if the filtering information should be propagated or not.</p>
		<p><center>
			<img width="680" border="0" src="Images/functionalities_transitions_merge.png"/></center>
		</p>
		<h2 id="Validation">Validation</h2>
		<p>The Basic Variability Add-On contributes new constraints to Melody Models mainly to assure the consistency of the filtering information assigned to model elements. This constraints could be shown, activated or deactivated at</p>
		<p>
			<b>Window -&gt; Preferences -&gt; Model Validation -&gt; Constraints</b>
		</p>
		<p><center>
			<img width="640" border="0" src="Images/functionalities_validation.png"/></center>
		</p>
		<p>To run the validation the user should perform the standard Capella validation selecting any melody element.</p>
		<p><center>
			<img width="440" border="0" src="Images/functionalities_validation_menu.png"/></center>
		</p>
		<p>Those are the currently available constraints that will be checked:</p>
		<h3 id="Integrity">Integrity</h3>
		<p>
			<b>VAR_I_01 - Only one FilteringModel, Configurations, DefaultCreationFeatureSet as Project child</b>
		</p>
		<p>
			<i>Error</i>: Because of a technical limitation the user could add more than one FilteringModel, Configurations, DefaultCreationFeatureSet as Project child. Only one is permitted as the other ones will be ignored.
		</p>
		<p>
			<b>VAR_I_02 - Only one AssociatedFeatureSet as MelodyElement child</b>
		</p>
		<p>
			<i>Error</i>: Because of a technical limitation the user could add more than one AssociatedFeatureSet as MelodyElement child. Only one is permitted as the other ones will be ignored.
		</p>
		<p>
			<b>VAR_I_03 - Empty AssociatedFeatureSet</b>
		</p>
		<p>
			<i>Warning</i>: It is not worthy to keep an AssociatedFeatureSet element without references to filtering features. It should be removed or updated.
		</p>
		<h3 id="Design">Design</h3>
		<p>
			<b>VAR_D_01 - MelodyElement parents consistency</b>
		</p>
		<p>
			<i>Error</i>: If a MelodyElement has feature V and any of its parents contains other associated features but not V.
		</p>
		<p>
			<b>VAR_D_02 - Components' functions consistency</b>
		</p>
		<p>
			<i>Warning</i>: If a Function in a Component does not contain the feature of the Component.
		</p>
		<p>
			<b>VAR_D_03 - Components' deployment links consistency</b>
		</p>
		<p>
			<i>Warning</i>: If a Component has a deployment link to another Component and it contains a feature that the other Component does not contain.
		</p>
		<p>
			<b>VAR_D_04 - FunctionalExchanges' components consistency</b>
		</p>
		<p>
			<i>Warning</i>: If a Functional Exchange contains a Feature that is not contained in its associated Functions.
		</p>
		<p>
			<b>VAR_D_05 - PhysicalLinks' components consistency</b>
		</p>
		<p>
			<i>Error</i>: If a PhysicalLink contains a Feature that is not contained in its associated Components.
		</p>
		<p>
			<b>VAR_D_06 - Unused filtering feature</b>
		</p>
		<p>
			<i>Warning</i>: A Variability Feature that is never used in any Melody Element
		</p>
		<h2 id="Customize_Capella_Project_Explorer">Customize Capella Project Explorer</h2>
		<p>The user could customize the Capella Project Explorer in order to show or hide the filtering related elements.</p>
		<p><center>
			<img width="380" border="0" src="Images/functionalities_customize_view.png"/></center>
		</p>
		<p><center>
			<img width="300" border="0" src="Images/functionalities_customize_view_filters.png"/></center>
		</p>
		<p>The AssociatedFeatureSet elements are hidden to users by default. All the functionalities are available without showing these elements so showing them is not recommended. If still a user wants to show them, the user should customize the Capella Project Explorer view and deselect Associated Feature Set as hidden elements.</p>
		<p>Now the user is able to see and modify the Associated Feature Set elements.  However</p>
		<p><center>
			<img width="620" border="0" src="Images/functionalities_customize_view_set.png"/></center>
		</p>
		<h2 id="Orchestra_compatibility">Orchestra compatibility</h2>
		<p>Variability information is exported by the melody orchestra connector.</p>
		<p>See separate document BasicVariability_Config_Installation.pdf for all the details of the deployment of the specific configuration In Orchestra.</p>
		<h2 id="Melody_Team_compatibility">Melody Team compatibility</h2>
		<p>Variability information is exported when users 
			<b>export</b> the model to a remote repository.  After connecting to a remote model all the presented functionalities are available except the derivation.
		</p>
		<p>Derivation must be performed in a local project. If a derivation want to be performed from a remote model users must 
			<b>import</b> the model from the remote repository.
		</p>
	</body>
</html>